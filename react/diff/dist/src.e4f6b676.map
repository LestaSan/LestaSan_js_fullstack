{"version":3,"sources":["src\\react\\create-element.js","src\\react-dom\\dom.js","src\\react-dom\\render.js","src\\react\\component.js","src\\react\\index.js","src\\react-dom\\index.js","src\\index.js"],"names":["createElement","tag","attrs","children","key","setAttribute","dom","name","value","test","toLowerCase","style","cssText","removeAttribute","renderComponent","render","_render","vnode","undefined","String","textNode","document","createTextNode","component","createComponent","setComponentProps","base","Object","keys","forEach","child","props","inst","prototype","Component","constructor","renderer","parentNode","replaceChild","_component","container","appendChild","isReactComponent","state","stateChange","assign","Counter","num","onClick","setState","React","ReactDOM","fontSize","fontWeight","getElementById"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBf;;;;AACA;;;;;;kBAEe;AACXlC,0CADW;AAEXkC;AAFW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHf;;kBAEe,EAAEnB,sBAAF","file":"src.e4f6b676.map","sourceRoot":"..","sourcesContent":["function createElement (tag, attrs, ...children) {\r\n    // console.log(tag, attrs, children);\r\n    attrs = attrs || {};\r\n    return {\r\n        tag,\r\n        attrs,\r\n        children,\r\n        key: attrs.key || null\r\n    }\r\n}\r\n\r\nexport default createElement;","export function setAttribute(dom, name, value) {\r\n    if (name === 'className') name = 'class';\r\n    if (/on\\w+/.test(name)) {\r\n        name = name.toLowerCase();\r\n        dom[name] = value || '';\r\n    } else if (name === 'style') {\r\n        if (!value || typeof value === 'string') {\r\n            dom.style.cssText = value;\r\n        } else if (value && typeof value === 'object'){\r\n            for(let name in value) {\r\n                dom.style[name] = typeof value[name] === 'number'? value[name] + 'px': value[name];\r\n            }\r\n        }\r\n    } else {\r\n        if (name in dom) {\r\n            dom[name] = value || '';\r\n        }\r\n        if (value) {\r\n            dom.setAttribute(name, value);\r\n        } else {\r\n            dom.removeAttribute(name, value);\r\n        }\r\n    }\r\n}","import { setAttribute } from './dom.js';\r\nimport Component from '../react/component.js';\r\n/**\r\n * 将虚拟DOM 变为真实DOM\r\n * @params vnode 虚拟DOM\r\n * @return 返回DOM\r\n * \r\n */ \r\n\r\nfunction _render (vnode) {\r\n    // console.log(vnode);\r\n    // 1. 递归 将结点转为DOM，子结点递归，要有出口  即文本节点时，结束\r\n    // 2. 结点类型： 三种：\r\n        // 文本结点 createTextNode() 在递归里结束  return createTextNode()\r\n        // 标签结点 createElement 有attrs设置 children设置(递归 _render)\r\n        // Component类型  render(return jsx)  组件返回jsx  再在外层父结点render()一次\r\n    if (vnode === undefined || vnode === null || typeof vnode === 'boolean') vnode = '';\r\n\r\n    if (typeof vnode === 'number') {\r\n        // console.log(vnode)\r\n        vnode = String(vnode);\r\n    }\r\n\r\n    if (typeof vnode === 'string') {\r\n        let textNode = document.createTextNode(vnode);\r\n        return textNode;\r\n    }\r\n\r\n    // <Counter/> 不是正常标签 vnode.tag = function Counter() {} class与function一样\r\n    if (typeof vnode.tag === 'function') {\r\n        // console.log(vnode);\r\n        // return document.createTextNode('component')\r\n        const component = createComponent(vnode.tag, vnode.attrs);\r\n        setComponentProps(component, vnode.attrs);\r\n        return component.base;\r\n    }\r\n\r\n    const dom = document.createElement(vnode.tag);\r\n    if (vnode.attrs) {\r\n        Object.keys(vnode.attrs).forEach(key => {\r\n            const value = vnode.attrs[key];\r\n            setAttribute(dom, key, value);\r\n        })\r\n    }\r\n\r\n    if (vnode.children) {\r\n        vnode.children.forEach(child => render(child, dom));\r\n    }\r\n\r\n    return dom;\r\n}\r\n\r\nfunction createComponent(component, props) {\r\n    let inst;\r\n    if (component.prototype && component.prototype.render) {\r\n        inst = new component(props);\r\n    } else {\r\n        inst = new Component(props);\r\n        inst.constructor = component;\r\n        inst.render = function() {\r\n            return this.constructor(props);\r\n        }\r\n    }\r\n    return inst;\r\n}\r\n\r\nfunction setComponentProps(component, props) {\r\n    component.props = props;\r\n    renderComponent(component);\r\n}\r\n\r\n// 将component里的jsx转为真实DOM，同时还会在setState时调用(外界)\r\nexport function renderComponent(component) {\r\n    let base;  //jsx => DOM\r\n    const renderer = component.render();  //jsx\r\n    base = _render(renderer);  // -> 递归 真实DOM\r\n    // 非第一次渲染组件 \r\n    if (component.base && component.base.parentNode) {\r\n        component.base.parentNode.replaceChild(base, component.base)\r\n    }\r\n    component.base = base;\r\n    base._component = component;\r\n}\r\n\r\nexport function render (vnode, container) {\r\n    // console.log(vnode, container);\r\n    return container.appendChild(_render(vnode));\r\n}\r\n\r\n","import { renderComponent } from \"../react-dom/render\";\r\n\r\nclass Component {\r\n    constructor (props = {}) {\r\n        this.isReactComponent = true;\r\n        this.state = {};\r\n        this.props = props;\r\n    }\r\n\r\n    setState (stateChange) {\r\n        Object.assign(this.state, stateChange);\r\n        // 更新DOM\r\n        renderComponent(this);\r\n    }\r\n}\r\n\r\nexport default Component;","import createElement from './create-element.js';\r\nimport Component from './component.js';\r\n\r\nexport default {\r\n    createElement,\r\n    Component\r\n}","import { render } from './render';\r\n\r\nexport default { render }","import React from './react';\r\nimport ReactDOM from './react-dom';\r\n\r\nclass Counter extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      num: 1\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div>\r\n        <h1>count:{ this.state.num }</h1>\r\n        <button onClick={() => this.onClick()}>add</button>\r\n      </div>\r\n    )\r\n  }\r\n  onClick () {\r\n    // console.log('a')\r\n    this.setState({\r\n      num: this.state.num + 1\r\n    })\r\n  }\r\n}\r\n\r\nReactDOM.render(\r\n  <div>\r\n    Hello\r\n    <span className='rt' onClick=\"console.log('zz');\"\r\n    style={{fontSize: 20, fontWeight: 'bold'}}\r\n    > World!</span>\r\n    <Counter/>\r\n  </div>\r\n  ,\r\n   document.getElementById('root'))\r\n"]}